## 分布式系统介绍

### 线程与进程的执行模式

1.互不通信的多线程模式

2.基于共享容器协同的多线程模式，一个队列用于生产和消费，这个队列就是多个线程会共享的容器或是数据对象，若个线程会并发地访问这个队列。对于线程不安全的容器或对象，需要Copy on Write的方式来控制并发访问

3.通过事件协同的多线程模式，一个线程等待另一个线程的事件，阻塞等待，注意原子性地获取锁，或是调整对多个锁的获取顺序来避免死锁

4.多进程模式，线程是属于进程的，一个进程内的线程共享了进程的内存空间，而多个进程之间的内存空间是独立的。多进程对于单进程多线程的方式来说，资源控制会更容易实现，此外，多进程中的单个进程出现问题，不会造成整体的不可用。多进程之间可以共享数据，但是代价比多线程要大，会涉及序列化和反序列化的开销

### 网络IO实现方式

1.BIO 即Blocking IO，采用阻塞的方式实现。一个socket需要用一个线程来处理，建立连接，读写数据的操作时，会发生阻塞。这个模式好处是简单

2.NIO 即Nonblocking，基于事件驱动思想，采用Reactor模式，不需要为每个socket分配一个线程，可以在一个线程中处理多个socket。Reactor会管理所有的handler，并把出现的事件交给Handler去处理。分发（wait/notify）方式

3.AIO 即AsynchronousIO ，异步IO，AIO采用Proactor模式，AIO在读写操作时，只需要调用相应的read/write方法，并且传入CompletionHandler（动作完成的处理器），在动作完成后，会调用该方法。

### 分布式服务调用

### 分布式系统难点

1.缺乏全局时钟

2.面对故障独立性

3.处理单点故障

4.分布式事务，（两阶段提交2PC，最终一致 等等）

